<!DOCTYPE html>
<html>
  <head>
    <title>注册</title>
    <meta charset="utf-8" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/semantic-ui/dist/semantic.min.css"
    />
    <link rel="stylesheet" type="text/css" href="dist/semantic.css"> 
 <style>
    body{
        /* background-image: url(ripples.png); */
        background-image: url("https://soo.starxn.com/starxnlg/bg.png");
    }
 </style> 
</head>

  <body>
    <div class="ui container">
      <form class="ui form" style="position:relative;left:450px;top:100px">
        <h2 class="ui  header">注册</h2>
        <div class="field">
          <label>用户名</label>
          <div class="ui left icon input">
            <input type="text" id="inputName" placeholder="请输入用户名" />
            <i class="user icon"></i>
          </div>
        </div>
      
        <div class="field">
          <label>密码</label>
          <div class="ui left icon input">
            <input type="password" id="inputPassword" placeholder="请输入密码" />
            <i class="lock icon"></i>
          </div>
        </div>
      
        <button class="ui button"  onclick="addUser()">注册</button>
      </form>
    </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js"></script>
 
  <script src="https://cdn.staticfile.org/jquery/3.6.0/jquery.min.js"></script>
  <script>
    
              
                       
function addUser() {
     const userName = $('#inputName').val().trim();
             
              const userPassword = $('#inputPassword').val().trim();
       
              if (userName&&userPassword) {
                  $.ajax({
                      type: 'POST',
                      url: 'https://localhost:7181/api/User',
                      data: JSON.stringify({userName,userPassword}),
                      contentType: 'application/json',
                      success: alert("注册成功！"),
                       
                      
                      error: (error) => {
                          console.log(error);
                          alert('注册异常');
                      },
                  });
              } else {
                  alert('请填写用户名和密码');
              
}
          }

    function isExist()
    {
               const userName = $('#inputName').val().trim();
               const userPassword = $('#inputPassword').val().trim();
              
            
             $.ajax({
              type:'GET',
              url:`https://localhost:7181/api/User/IsUserExist?name=${userName}`,
              success:(result)=>{
               alert(result);
                if(result==true)
                {
                  alert("该用户名已被使用，请重新起名");
                 return true;
                }
                if(result==false)
                {
                  alert(false);
                  return false;
                 
  
                }            

              },
             });
        
    }
     
    
  </script>  
</body> 
   
</html>
